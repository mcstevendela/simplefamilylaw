{# Template for WooCommerce product archive page #}
{% extends "base.twig" %}

{% block content %}
	<div class="woocommerce-products-archive">
		<div class="container">
			{% if wp_query.have_posts %}
				<div class="woocommerce-header">
					<h1 class="page-title">{{ wp_title }}</h1>
					{% if is_product_taxonomy %}
						<div class="taxonomy-description">
							{{ term_description }}
						</div>
					{% endif %}
				</div>

				<div class="woocommerce-products">
					{# WooCommerce hooks for product list #}
					{% do action('woocommerce_before_main_content') %}
					{% do action('woocommerce_archive_description') %}
					{% do action('woocommerce_before_shop_loop') %}

					<div class="products grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
						{% while wp_query.have_posts %}
							{% do wp_query.the_post() %}
							{% set product = fn('wc_get_product', post.ID) %}
							
							<div class="product-item">
								<a href="{{ post.link }}" class="product-link">
									{% if post.thumbnail %}
										<div class="product-image">
											{{ post.thumbnail }}
										</div>
									{% endif %}
									
									<h3 class="product-title">{{ post.title }}</h3>
								</a>

								<div class="product-meta">
									{% if product %}
										<p class="product-price">
											{{ product.get_price_html|raw }}
										</p>

										{% if product.get_type == 'subscription' %}
											<div class="subscription-info">
												<span class="subscription-period">
													Subscribe: {{ product.get_meta('_subscription_period') }}
												</span>
											</div>
										{% endif %}

										<div class="product-actions">
											{% do action('woocommerce_after_shop_loop_item') %}
										</div>
									{% endif %}
								</div>
							</div>
						{% endwhile %}
					</div>

					{% do action('woocommerce_after_shop_loop') %}
					{% do action('woocommerce_after_main_content') %}
				</div>

				{# Pagination #}
				{% if posts|length >= 12 %}
					<div class="pagination">
						{{ pagination(posts) }}
					</div>
				{% endif %}
			{% else %}
				<p class="no-products">
					{{ 'No products found' }}
				</p>
			{% endif %}
		</div>
	</div>
{% endblock %}
